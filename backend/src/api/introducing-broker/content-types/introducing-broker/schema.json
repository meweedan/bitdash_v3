{
  "kind": "collectionType",
  "collectionName": "introducing_brokers",
  "info": {
    "singularName": "introducing-broker",
    "pluralName": "introducing-brokers",
    "displayName": "Introducing Broker",
    "description": "Affiliate and referring partners for all BitDash platforms"
  },
  "options": {
    "draftAndPublish": false,
    "timestamps": true
  },
  "pluginOptions": {},
  "attributes": {
    "users_permissions_user": {
      "type": "relation",
      "relation": "oneToOne",
      "target": "plugin::users-permissions.user",
      "inversedBy": "introducing_broker"
    },
    "status": {
      "type": "enumeration",
      "enum": ["pending", "active", "suspended", "terminated"],
      "default": "pending"
    },
    "ibType": {
      "type": "enumeration",
      "enum": ["individual", "corporate", "affiliate"],
      "default": "individual"
    },
    "companyName": {
      "type": "string"
    },
    "companyRegistrationNumber": {
      "type": "string"
    },
    "website": {
      "type": "string"
    },
    "referralLink": {
      "type": "string"
    },
    "referralCode": {
      "type": "string",
      "unique": true
    },
    "commissionPlan": {
      "type": "enumeration",
      "enum": ["standard", "premium", "custom"],
      "default": "standard"
    },
    "commissionRate": {
      "type": "decimal",
      "default": 30
    },
    "customCommissionStructure": {
      "type": "json"
    },
    "minimumCommissionPayout": {
      "type": "decimal",
      "default": 100
    },
    "totalReferrals": {
      "type": "integer",
      "default": 0
    },
    "activeClients": {
      "type": "integer",
      "default": 0
    },
    "referredRetailTraders": {
      "type": "relation",
      "relation": "oneToMany",
      "target": "api::retail-trader.retail-trader",
      "mappedBy": "referredBy"
    },
    "referredPropTraders": {
      "type": "relation",
      "relation": "oneToMany",
      "target": "api::prop-trader.prop-trader",
      "mappedBy": "referredBy"
    },
    "totalCommissionEarned": {
      "type": "decimal",
      "default": 0
    },
    "unpaidCommission": {
      "type": "decimal",
      "default": 0
    },
    "kycVerified": {
      "type": "boolean",
      "default": false
    },
    "marketingMaterials": {
      "type": "json",
      "comment": "Approved marketing assets"
    },
    "marketingPermissions": {
      "type": "json"
    },
    "paymentDetails": {
      "type": "json"
    },
    "preferredPayoutMethod": {
      "type": "enumeration",
      "enum": ["bank_transfer", "crypto", "internal_transfer"],
      "default": "bank_transfer"
    },
    "payoutFrequency": {
      "type": "enumeration",
      "enum": ["weekly", "biweekly", "monthly"],
      "default": "monthly"
    },
    "wallet": {
      "type": "relation",
      "relation": "oneToOne",
      "target": "api::wallet.wallet",
      "inversedBy": "introducing_broker"
    },
    "commissionHistory": {
      "type": "relation",
      "relation": "oneToMany",
      "target": "api::transaction.transaction",
      "mappedBy": "introducing_broker"
    },
    "performanceMetrics": {
      "type": "json"
    },
    "agreedToTerms": {
      "type": "boolean",
      "default": false,
      "required": true
    },
    "ibAgreement": {
      "type": "json",
      "comment": "Signed agreement details"
    },
    "targetRegions": {
      "type": "json",
      "comment": "Geographical areas of operation"
    },
    "ibManager": {
      "type": "relation",
      "relation": "manyToOne",
      "target": "plugin::users-permissions.user"
    },
    "notes": {
      "type": "text"
    }
  }
}